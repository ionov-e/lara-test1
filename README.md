# Небольшая интеграция с АПИ vetmanager используя Laravel
<p align="center"><a href="https://laravel.com" target="_blank"><img src="https://raw.githubusercontent.com/laravel/art/master/logo-lockup/5%20SVG/2%20CMYK/1%20Full%20Color/laravel-logolockup-cmyk-red.svg" width="400" alt="Laravel Logo"></a></p>

## Крошечная инструкция

1. Создать и зайти (через консоль) в удобную пустую папку, где развернем этот проект
2. `git clone https://github.com/ionov-e/lara-test1.git .`
3. Скопировать **.env.example** (оставив в той же папке - в корне) по названием **.env**
4. В этом файле окружения (**.env**) отредактировать последние 3 строки (ввести свой линукс **логин**, **uid**, **gid**)
5. `composer update` (Либо предварительно установив композер с php, либо своим предпочитаемым образом)
6. `./vendor/bin/sail up -d`
7. `chmod -R 777 storage` - не думаю что стоит париться в данном случае
8. `docker exec -it -u $USER lara-test1-laravel.test-1 bash`  - название контейнера если отличается - подредактировать
9. `php artisan key:generate`
10. `php artisan storage:link`
11. `php artisan migrate`
12. `php artisan db:seed`
13. (Полезно больше для редактирования, а не запуска)

    `php artisan clear-compiled`

    `php artisan ide-helper:generate`
14. `npm install`
15. `npm run dev`. Высветится примерно такое содержимое (закрывать процесс не нужно):

    **VITE v3.1.7  ready in 234 ms**

    **➜  Local:   http://localhost:5173/**
    **➜  Network: http://172.19.0.7:5173/**

    **LARAVEL v9.35.1  plugin v0.6.1**

    **➜  APP_URL: http://localhost**

## Использование вкратце

Внешний вид не интересовал.

1. Открыть сайт.
2. Справа-сверху Регистрация
3. Что нравится вводить, а это лучше сразу мое

   Your URL: адрес полученный после регистрации на **vetmanager**. Будет иметь вид: **https://XXX.vetmanager2.ru**

   Апи ключ: ключ полученный после регистрации на **vetmanager**

4. Кнопочки выглядят так как выглядят. Но понятно что делают и к чему относятся, как например “**Create New Client**“
   вверху.
   Чуть ниже в этой же таблице есть поиск. И в последних 3 столбцах кнопки (**View**, **Edit**, **Delete**).
   Дальше все будет понятно и интуитивно вполне.

## Выполнение задания

1. Должен быть предустановлен админ пользователь admin@admin.com, pass: secret (через сидер)
2. Должна быть отдельная табличка для сохранения настроек апи (урл и ключ)
3. Должны быть настроены связи юзера с этой табличкой
4. Делаем авторизацию. После нее человек попадает на домашнюю страницу.
5. Через мидлвар делаем проверку (установлены ли у него настройки) если не установлены, то кидаем на отдельную страницу
   где пользователь указывает данные.

   **_При регистрации проверка. И есть проверка в последствии в мидлвэр_**
6. На хоум странице у него есть табличка клиентов ветменеджера (все запросы делать с лимитом 50), т.е мы видим 50
   клиентов с ветменеджера.
7. Также видим поиск по фио (который тоже находит первые 50 совпадений

   **_По фамилии сделал - совсем несложно, если хотели иначе и подразумевалось именно ФИО_**
8. Есть кнопки (Добавить, Просмотреть, Редактировать и Удалить)
9. Добавить, Редактировать и Удалить - понятно что делают (при удалении удалить и всех питомцев)
10. При нажатии на просмотр мы попадаем в просмотр профиля клиента и там видим грид с питомцами клиента
11. У них тоже есть свой круд
12. Делаем серверную валидацию через FormRequest'ы
13. Также делаем красивое отображение ошибок валидации или других ошибок
14. Также во вьюшках используем @include других вьюшек
15. Для работы с Api можно использовать библиотеку [https://github.com/otis22/vetmanager-rest-api]()

Да, логгер и тесты добавил бы

Да, конечно можно выбор породы симпатично сделать. И кстати,
в [https://help.vetmanager.cloud/article/3025]() (Создание питомца с минимальными данными). **alias** и **owner_id**
недостаточно. Еще **type_id** и **breed_id** необходимо, можно кому-нибудь исправить
